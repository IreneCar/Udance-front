(this["webpackJsonpproject-management-client"]=this["webpackJsonpproject-management-client"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(22),s=n.n(a),i=(n(29),n(30),n(2)),o=n(5),j=n(3),u=n(10),l=n.n(u),b=n(0),O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,d=r.a.createContext();function p(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!0),i=Object(j.a)(s,2),o=i[0],u=i[1],p=Object(c.useState)(null),h=Object(j.a)(p,2),x=h[0],v=h[1],f=function(){var e=localStorage.getItem("authToken");e?l.a.get("".concat(O,"/auth/verify"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=e.data;v(t),a(!0),u(!1)})).catch((function(e){a(!1),v(null),u(!1)})):u(!1)};return Object(c.useEffect)((function(){f()}),[]),Object(b.jsx)(d.Provider,{value:{isLoggedIn:r,isLoading:o,user:x,logInUser:function(e){localStorage.setItem("authToken",e),f()},logOutUser:function(){localStorage.removeItem("authToken"),a(!1),v(null)}},children:e.children})}var h=function(){var e=Object(c.useContext)(d),t=e.isLoggedIn,n=e.user,r=e.logOutUser;return Object(b.jsxs)("nav",{children:[Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)("button",{children:"Home"})}),"-",t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.b,{to:"/projects",children:Object(b.jsx)("button",{children:"Projects"})}),Object(b.jsx)("button",{onClick:r,children:"Logout"}),Object(b.jsx)("span",{children:n.name})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(o.b,{to:"/signup",children:[" ",Object(b.jsx)("button",{children:"Signup"})," "]}),Object(b.jsxs)(o.b,{to:"/login",children:[" ",Object(b.jsx)("button",{children:"Login"})," "]})]})]})};var x=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Home Page"})})},v=n(9),f=n(4),g=n(7),m=l.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL)});m.interceptors.request.use((function(e){var t=localStorage.getItem("authToken");return e.headers=t&&{Authorization:"Bearer ".concat(t)},e}));var S=m,k="/projects",C=function(e){return S.get("".concat(k,"/").concat(e))},P=function(e){return S.post("".concat(k,"/"),e)};var T=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),o=i[0],u=i[1],l=function(){var t=Object(g.a)(Object(f.a)().mark((function t(n){var c;return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c={title:r,description:o},t.prev=2,t.next=5,P(c);case 5:a(""),u(""),e.refreshProjects(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"AddProject",children:[Object(b.jsx)("h3",{children:"Add Project"}),Object(b.jsxs)("form",{onSubmit:l,children:[Object(b.jsx)("label",{children:"Title:"}),Object(b.jsx)("input",{type:"text",name:"title",value:r,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("label",{children:"Description:"}),Object(b.jsx)("textarea",{type:"text",name:"description",value:o,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Submit"})]})]})};var w=function(e){var t=e.title,n=e.description,c=e._id;return Object(b.jsxs)("div",{className:"ProjectCard card",children:[Object(b.jsx)(o.b,{to:"/projects/".concat(c),children:Object(b.jsx)("h3",{children:t})}),Object(b.jsxs)("p",{children:["id: ",c]}),Object(b.jsxs)("p",{style:{maxWidth:"400px"},children:[n," "]})]})};var _=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!0),s=Object(j.a)(a,2),i=s[0],o=s[1],u=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.get("".concat(k,"/"));case 3:t=e.sent,r(t.data),o(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){u()}),[]),Object(b.jsxs)("div",{className:"ProjectListPage",children:[Object(b.jsx)(T,{refreshProjects:u}),i&&Object(b.jsx)("div",{children:"Loading..."}),!i&&(null===n||void 0===n?void 0:n.map((function(e){return Object(b.jsx)(w,Object(v.a)({},e),e._id)})))]})},y=n(24),L="/tasks";var E=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),o=i[0],u=i[1],l=Object(c.useState)(!1),O=Object(j.a)(l,2),d=O[0],p=O[1],h=function(){var t=Object(g.a)(Object(f.a)().mark((function t(n){var c,s;return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=e.projectId,s={title:r,description:o,projectId:c},p(!0),t.prev=4,t.next=7,i=s,S.post("".concat(L,"/"),i);case 7:a(""),u(""),p(!1),e.refreshProject(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}var i}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"AddTask",children:[Object(b.jsx)("h3",{children:"Add New Task"}),Object(b.jsxs)("form",{onSubmit:h,children:[Object(b.jsx)("label",{children:"Title:"}),Object(b.jsx)("input",{type:"text",name:"title",value:r,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("label",{children:"Description:"}),Object(b.jsx)("textarea",{type:"text",name:"description",value:o,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Add Task"}),d&&Object(b.jsx)(y.a,{animation:"grow",size:"sm"})]})]})};var I=function(e){var t=e.title,n=e.description,r=e._id,a=Object(c.useState)(t),s=Object(j.a)(a,2),i=s[0],o=s[1],u=Object(c.useState)(n),l=Object(j.a)(u,2),O=l[0],d=l[1],p=Object(c.useState)(!1),h=Object(j.a)(p,2),x=h[0],v=h[1],m=r,k=function(){var e=Object(g.a)(Object(f.a)().mark((function e(t){var n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={inputTitle:i,inputDescription:O},e.next=4,t=m,c=n,S.put("".concat(L,"/").concat(t),c);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var t,c}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(Object(f.a)().mark((function e(t){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t=m,S.delete("".concat(L,"/").concat(t));case 3:v(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var t}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{children:!x&&Object(b.jsxs)("div",{className:"TaskCard card",children:[Object(b.jsx)("p",{children:"Task"}),Object(b.jsx)("input",{value:i,onChange:function(e){o(e.target.value)}}),Object(b.jsx)("input",{value:O,onChange:function(e){d(e.target.value)}}),Object(b.jsx)("button",{onClick:k,children:"Modificar"}),Object(b.jsx)("button",{onClick:C,children:"Eliminar"})]})})};var A=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(i.h)().id,u=s,l=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("authToken"),e.prev=1,e.next=4,C(s);case 4:t=e.sent,a(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){l()}),[]),Object(b.jsxs)("div",{className:"ProjectDetails",children:[r&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Project: ",r.title]}),Object(b.jsxs)("p",{children:["Description: ",r.description]})]}),Object(b.jsx)(E,{refreshProject:l,projectId:u}),r&&r.tasks.map((function(e){return Object(b.jsx)(I,Object(v.a)({},e),e._id)})),Object(b.jsx)(o.b,{to:"/projects",children:Object(b.jsx)("button",{children:"Back to projects"})})]})},D="/auth";var N=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),u=Object(j.a)(s,2),l=u[0],O=u[1],d=Object(c.useState)(""),p=Object(j.a)(d,2),h=p[0],x=p[1],v=Object(i.g)(),m=Object(c.useState)(void 0),k=Object(j.a)(m,2),C=k[0],P=k[1],T=function(){var e=Object(g.a)(Object(f.a)().mark((function e(t){var n,c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:r,password:l,name:h},e.prev=2,e.next=5,a=n,S.post("".concat(D,"/signup"),a);case 5:v("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),400===(null===(c=e.t0.response)||void 0===c?void 0:c.status)&&(P(e.t0.response.data.errorMessage),console.log(C));case 11:case"end":return e.stop()}var a}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"SignupPage",children:[Object(b.jsx)("h1",{children:"Sign Up"}),Object(b.jsxs)("form",{onSubmit:T,children:[Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",name:"email",value:r,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",name:"password",value:l,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Name:"}),Object(b.jsx)("input",{type:"text",name:"name",value:h,onChange:function(e){return x(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Sign Up"})]}),C&&Object(b.jsx)("p",{className:"error-message",children:C}),Object(b.jsx)("p",{children:"Already have account?"}),Object(b.jsx)(o.b,{to:"/login",children:" Login"})]})};var U=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),u=Object(j.a)(s,2),l=u[0],O=u[1],p=Object(c.useState)(void 0),h=Object(j.a)(p,2),x=h[0],v=h[1],m=Object(i.g)(),k=Object(c.useContext)(d).logInUser,C=function(){var e=Object(g.a)(Object(f.a)().mark((function e(t){var n,c,a,s,i,o;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:r,password:l},e.prev=2,e.next=5,j=n,S.post("".concat(D,"/login"),j);case 5:c=e.sent,a=c.data.authToken,k(a),m("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),o=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message,v(o);case 15:case"end":return e.stop()}var j}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"LoginPage",children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:C,children:[Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",name:"email",value:r,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",name:"password",value:l,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Login"})]}),x&&Object(b.jsx)("p",{className:"error-message",children:x}),Object(b.jsx)("p",{children:"Don't have an account yet?"}),Object(b.jsx)(o.b,{to:"/signup",children:" Sign Up"})]})};var R=function(e){var t=Object(c.useContext)(d),n=t.isLoggedIn;return t.isLoading?Object(b.jsx)("p",{children:"Loading ..."}):n?e.children:Object(b.jsx)(i.a,{to:"/login",replace:!0})};var F=function(e){var t=Object(c.useContext)(d),n=t.isLoggedIn;return t.isLoading?Object(b.jsx)("p",{children:"Loading ..."}):n?Object(b.jsx)(i.a,{to:"/",replace:!0}):e.children};var H=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{}),Object(b.jsxs)(i.d,{children:[Object(b.jsx)(i.b,{exact:!0,path:"/",component:x}),Object(b.jsx)(i.b,{exact:!0,path:"/projects",element:Object(b.jsx)(R,{children:Object(b.jsx)(_,{})})}),Object(b.jsx)(i.b,{exact:!0,path:"/projects/:id",element:Object(b.jsx)(R,{children:Object(b.jsx)(A,{})})}),Object(b.jsx)(i.b,{exact:!0,path:"/signup",element:Object(b.jsx)(F,{children:Object(b.jsx)(N,{})})}),Object(b.jsx)(i.b,{exact:!0,path:"/login",element:Object(b.jsx)(F,{children:Object(b.jsx)(U,{})})})]})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(p,{children:Object(b.jsx)(H,{})})})}),document.getElementById("root")),B()}},[[51,1,2]]]);
//# sourceMappingURL=main.6d26c3a7.chunk.js.map